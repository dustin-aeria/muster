/**
 * map-controls.css
 * Map-specific CSS overrides for proper interactivity
 * 
 * BATCH 6 FINAL:
 * - Ensures map control panels are clickable
 * - Fixes scroll handling within controls
 * - Proper z-index stacking
 * - Prevents map events from interfering with controls
 * 
 * @location src/styles/map-controls.css
 * @action REPLACE
 */

/* ============================================
   MAP CONTROL PANELS
   Ensure controls are always interactive
   ============================================ */

.map-control-panel {
  pointer-events: auto !important;
  touch-action: auto !important;
  -webkit-user-select: none;
  user-select: none;
  position: relative;
  z-index: 50;
}

/* Make sure all interactive elements work */
.map-control-panel button,
.map-control-panel input,
.map-control-panel select,
.map-control-panel textarea,
.map-control-panel [role="button"],
.map-control-panel a {
  pointer-events: auto !important;
  cursor: pointer;
  position: relative;
  z-index: 51;
}

.map-control-panel input,
.map-control-panel textarea {
  cursor: text;
}

/* ============================================
   SCROLL HANDLING
   Allow scrolling within control panels
   ============================================ */

.map-control-panel .overflow-y-auto,
.map-control-panel .overflow-x-auto,
.map-control-panel .overflow-auto {
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  touch-action: pan-y;
}

/* Custom scrollbar for control panels */
.map-control-panel ::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.map-control-panel ::-webkit-scrollbar-track {
  background: transparent;
}

.map-control-panel ::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}

.map-control-panel ::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* ============================================
   Z-INDEX STACKING
   Ensure proper layering of controls
   ============================================ */

/* Dropdown menus and overlays */
.map-control-panel [class*="absolute"] {
  z-index: 60;
  pointer-events: auto;
}

/* Modal backdrop */
.map-control-panel .fixed.inset-0 {
  z-index: 55;
}

/* ============================================
   MAPBOX OVERRIDES
   Prevent mapbox from interfering
   ============================================ */

/* Mapbox navigation controls - lower z-index */
.mapboxgl-ctrl-attrib,
.mapboxgl-ctrl-nav,
.mapboxgl-ctrl-group {
  z-index: 10 !important;
}

/* Ensure our controls are above mapbox controls */
.mapboxgl-map .map-control-panel {
  z-index: 50 !important;
}

/* ============================================
   TOUCH DEVICE IMPROVEMENTS
   ============================================ */

@media (max-width: 768px) {
  .map-control-panel {
    touch-action: manipulation;
  }
  
  /* Larger touch targets on mobile */
  .map-control-panel button {
    min-height: 44px;
    min-width: 44px;
  }
}

/* ============================================
   FULLSCREEN MODE
   ============================================ */

.map-fullscreen-overlay {
  position: fixed !important;
  inset: 0 !important;
  z-index: 9999 !important;
  height: 100vh !important;
  width: 100vw !important;
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

/* High contrast mode */
@media (prefers-contrast: high) {
  .map-control-panel {
    border-width: 2px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .map-control-panel,
  .map-control-panel * {
    transition: none !important;
    animation: none !important;
  }
}

/* Focus visible for keyboard navigation */
.map-control-panel button:focus-visible,
.map-control-panel input:focus-visible,
.map-control-panel select:focus-visible {
  outline: 2px solid #3B82F6;
  outline-offset: 2px;
}

/* ============================================
   PREVENT TEXT SELECTION DURING MAP USE
   ============================================ */

.map-container * {
  -webkit-user-select: none;
  user-select: none;
}

.map-container input,
.map-container textarea {
  -webkit-user-select: text;
  user-select: text;
}
